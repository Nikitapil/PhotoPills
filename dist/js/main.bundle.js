(()=>{"use strict";const e=document.querySelector(".readyfilters__items"),t=document.querySelector(".photocomparer"),o=document.querySelector(".photocomparer__separator"),r=document.querySelector(".photomaker__upload-input"),l=document.querySelector(".photomaker__preload"),n=document.querySelector(".photocomparer__origin-photo"),a=document.querySelector(".photocomparer__modified-photo"),i=document.querySelector(".photomaker__canvas"),c=i.getContext("2d"),s=document.querySelectorAll(".photoeditor__userf"),d=document.querySelector(".userfilters__inputs"),u=document.querySelector(".readyfilters__items"),m=document.querySelector(".photomaker__dowload");let _=!1;function p(e){if(_){const r=document.querySelector(".photocomparer__modified-photo");let l=e.pageX-t.getBoundingClientRect().left;r.style.width=l+"px",o.style.left=l+"px"}}document.addEventListener("click",(t=>{let o=t.target;if(o.closest(".readyfilters__navigation-left")&&e.scrollBy(-105,0),o.closest(".readyfilters__navigation-right")&&e.scrollBy(105,0),o.closest(".photomaker__save-btn")){let e=getComputedStyle(l).filter,t=document.querySelector(".photomaker__preload img");t&&(c.filter=e,c.drawImage(t,0,0),m.href=i.toDataURL(),m.classList.remove("disabled-link"))}(o.closest(".header__mobile")||o.closest(".header__nav-link"))&&(document.querySelector(".header__mobile").classList.toggle("active-mobile"),document.querySelector(".header__nav-list").classList.toggle("active-mobile"))})),o.addEventListener("mousedown",(()=>{_=!0})),o.addEventListener("mouseup",(()=>{_=!1})),o.addEventListener("touchstart",(()=>{_=!0})),o.addEventListener("touchend",(()=>{_=!1})),t.addEventListener("mousemove",p),t.addEventListener("touchmove",p),r.addEventListener("change",(function(){if(this.files){let e=this.files[0];if(e.type.match(/image.*/)){l.innerHTML="",n.innerHTML="",a.innerHTML="";let o=new FileReader;o.onload=function(){let e=new Image;e.src=o.result;let r=e.cloneNode(!0),c=e.cloneNode(!0);l.append(e),n.append(r),a.append(c),t.style.minHeight="fit-content",e.onload=function(){i.width=this.naturalWidth,i.height=this.naturalHeight}},o.readAsDataURL(e)}}})),d.addEventListener("input",(e=>{if(e.target.closest(".photoeditor__userf")){let e=Array.from(s).map((e=>"blur"==e.name?`${e.name}(${e.value}px)`:`${e.name}(${e.value}%)`)).join(" ");l.style.filter=e,a.style.filter=e,m.classList.add("disabled-link")}})),u.addEventListener("click",(e=>{let t=e.target;if(t.closest(".readyfilter__btn")){let e=getComputedStyle(t).filter;l.style.filter=e,a.style.filter=e,m.classList.add("disabled-link")}}));const h=document.querySelector(".paint__canvas"),f=h.getContext("2d"),y=document.querySelector(".paint__body"),g=document.querySelector(".paint__download"),v=document.querySelector(".paint__color"),S=document.querySelector(".paint__eraiser");g.href=h.toDataURL();let L=!1;function q(e){L=!0,f.beginPath(),f.moveTo(e.pageX-h.offsetLeft,e.pageY-h.offsetTop)}function k(e){if(1==L){let t=e.pageX-h.offsetLeft,o=e.pageY-h.offsetTop;f.lineTo(t,o),f.stroke()}}function w(){L=!1,g.href=h.toDataURL()}window.onload=function(){h.width=y.offsetWidth},y.addEventListener("click",(e=>{e.target.closest(".paint__clear")&&f.clearRect(0,0,h.width,h.height)})),y.addEventListener("change",(e=>{e.target.closest(".paint__fill")&&(f.fillStyle=e.target.value,f.fillRect(0,0,h.width,h.height)),e.target.closest(".paint__width")&&(f.lineWidth=e.target.value),e.target.closest(".paint__color")&&(S.checked?f.strokeStyle="white":f.strokeStyle=v.value),e.target.closest(".paint__eraiser")&&(e.target.checked?f.strokeStyle="white":f.strokeStyle=v.value)})),h.onmousedown=q,h.onmouseup=w,h.onmouseout=w,h.onmousemove=k,h.touchstart=q,h.touchend=w,h.touchcancel=w,h.onmousemove=k})();
//# sourceMappingURL=main.bundle.js.map